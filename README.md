# Лабораторная работа №6 — Учёт студентов и успеваемости (PostgreSQL + C++/pqxx)

Консольное приложение на C++ для работы с базой данных PostgreSQL: просмотр и поиск студентов/дисциплин/оценок, операции с оценками (добавить/изменить/удалить), аналитика и просмотр посещаемости. Также в проекте есть демонстрации SQL-инъекций (как пример небезопасного кода) и правильный подход через параметризованные запросы.

---

## Возможности

### Просмотр
- Ведомость оценок (оценки + студент + группа + дисциплина + преподаватель + семестр)
- Список студентов (с группой)
- Список дисциплин (с преподавателем)
- Просмотр посещаемости

### Поиск
- Поиск оценок по студенту (по ФИО, `ILIKE`)
- Поиск дисциплин конкретного преподавателя (по ФИО, `ILIKE`)

### Операции с оценками
- Добавить оценку (по `student_code`, ID дисциплины, ID семестра)
- Изменить оценку по `grade_id` (обновляет `graded_at`)
- Удалить оценку по `grade_id`

### Аналитика
- Успеваемость групп (агрегации `GROUP BY`, фильтр `HAVING`)
- Максимальная оценка (подзапрос `MAX`)
- Нагрузка преподавателей (сколько дисциплин ведёт)
- Общая статистика (кол-во студентов/оценок, средний балл, доля посещений)

### Безопасность (SQL Injection)
- Демонстрация уязвимого поиска (склейка SQL-строки)
- Демонстрация `UNION`-инъекции
- Демонстрация уязвимого удаления (выполнение заблокировано для безопасности)
- Безопасный вариант запросов реализован через `exec_params(...)`

---

## Структура проекта

- `main.cpp` — подключение к БД, цикл меню, транзакции, вызовы функций
- `operations.h` — объявления функций меню/операций
- `operations.cpp` — реализация операций (SQL-запросы и вывод)
- `create_tables.sql` — создание таблиц и ограничений (DDL)
- `insert_data.sql` — заполнение тестовыми данными (DML)
- `zapros.txt` — примеры SQL-запросов для проверки
- `Makefile` — сборка проекта

---

## Требования

- PostgreSQL 12+ (подойдёт и новее)
- Библиотека `libpqxx` (для C++)
- Компилятор C++ (g++/clang++)
- `make` (если используется Makefile)

---
